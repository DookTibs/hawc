{% extends 'portal.html' %}

{% load add_class %}

{% block title %}
  {{assessment}} | {{study}} | {{crud}} {% if crud == "Create" %}Experiment{% else %}{{object}}{% endif %} | HAWC
{% endblock title %}

{% block extrastyle %}
  <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}wysihtml5/css/bootstrap-wysihtml5.css" />
{% endblock %}

{% block breadcrumbs %}
  <li><a href="{% url 'assessment:detail' pk=assessment.pk %}">{{ assessment }}</a><span class="divider">/</span></li>
  {% if crud == "Update" %}
    <li><a href="{% url 'study:detail' object.study.pk %}">{{object.study}}</a><span class="divider">/</span></li>
    <li><a href="{% url 'animal:experiment_detail' object.pk %}">{{object}}</a><span class="divider">/</span></li>
    <li class="active">{{ crud }} </li>
  {% else %}
    <li><a href="{% url 'study:detail' study.pk %}">{{study}}</a><span class="divider">/</span></li>
    <li class="active"> {{ crud }} Experiment <span class="divider">/</span></li>
  {% endif %}
{% endblock %}

{% block content %}

  <form id="experiment" class="form-horizontal" action="." method="post">

    {% csrf_token %}

    <div class='row-fluid'>
      <fieldset>
        {% if crud == "Create" %}
          <legend>Create new experiment</legend>
          <span class="help-block">Create a new experiment. Each experiment is a associated with a study, and may have one or more collections of animals. For example, one experiment may be a 2-year cancer bioassay, for example, while another generational study.</span><br>
        {% elif crud == "Update" %}
          <legend>Update  {{ object }} </legend>
          <span class="help-block">Update an existing experiment.</span><br>
        {% endif %}

        {{ form.non_field_errors|add_class:"alert alert-error" }}

        {% for field in form %}
          <div class="control-group form-row">
            {{field.label_tag|add_class:"control-label"}}
            <div class="controls">
              {{field}}
              <span class='help-inline'>{{field.help_text}}</span>
            </div>
            {{field.errors|add_class:"alert alert-error"}}
          </div>
        {% endfor %}
      </fieldset>
    </div>
    <div class="row-fluid">
      <div class="form-actions">
        <button id='submit_form' type="submit" class="btn btn-primary">{{ crud }} experiment</button>
        {% if crud == "Create" %}
          <a href='{% url 'study:detail' study.pk %}' class="btn">Cancel</a>
        {% elif crud = "Update" %}
          <a href="{% url 'animal:experiment_detail' object.pk %}" class="btn">Cancel</a>
        {% endif %}
      </div>
    </div>

  </form>

{% endblock %}

{% block extrajs %}
  <script src="{{STATIC_URL}}wysihtml5/js/wysihtml5-0.3.0.min.js" type="text/javascript"></script>
  <script src="{{STATIC_URL}}wysihtml5/js/bootstrap-wysihtml5.js" type="text/javascript"></script>
  <script type="text/javascript">
    $('#id_description').wysihtml5({"stylesheets": false});
  </script>
{% endblock extrajs %}
